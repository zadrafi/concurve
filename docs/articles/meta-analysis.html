<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> concurve R Package | Less Likely </title>
<!-- favicons --><link rel="shortcut icon" type="image/x-icon" href="https://github.com/zadrafi/concurve/raw/master/pkgdown/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://github.com/zadrafi/concurve/raw/master/pkgdown/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://github.com/zadrafi/concurve/raw/master/pkgdown/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://github.com/zadrafi/concurve/raw/master/pkgdown/favicon/apple-touch-icon-180x180.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://github.com/zadrafi/concurve/raw/master/pkgdown/favicon/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://github.com/zadrafi/concurve/raw/master/pkgdown/favicon/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="https://github.com/zadrafi/concurve/raw/master/pkgdown/favicon/apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Meta-Analysis Examples">
<meta property="og:description" content="This guide walks through how to construct consonance functions from meta-analysis data using the metafor R package. Both simple and complex data structures are examined.">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/f/f0/Generic_forest_plot.png,concurve R package hex-logo">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-116104766-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-116104766-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand"><img src="https://data.lesslikely.com/concurve/reference/figures/logo.svg" id="package-logo" align="left" width="35"><a class="navbar-link" href="../index.html">concurve</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.7.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/examples.html">Examples in R</a>
    </li>
    <li>
      <a href="../articles/survival.html">Survival Modeling</a>
    </li>
    <li>
      <a href="../articles/meta-analysis.html">Meta-Analysis Examples</a>
    </li>
    <li>
      <a href="../articles/likelihood.html">Profile Likelihoods</a>
    </li>
    <li>
      <a href="../articles/bootstrap.html">Bootstrap and Consonance Functions</a>
    </li>
    <li>
      <a href="../articles/bayes.html">Comparison to Bayesian Posteriors</a>
    </li>
    <li>
      <a href="../articles/variancecomponents.html">Estimating Variance Components</a>
    </li>
    <li>
      <a href="../articles/stata.html">Using Stata</a>
    </li>
    <li>
      <a href="../articles/customizing.html">Customizing Plots</a>
    </li>
    <li>
      <a href="../articles/tables.html">Generating Tables</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/literature.html">Literature</a>
</li>
<li>
  <a href="../articles/svalues.html">S-values</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../news/index.html">Package Updates</a>
    </li>
    <li>
      <a href="../security.html">Supported Versions</a>
    </li>
    <li>
      <a href="../articles/wishlist.html">Feature Wish List</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/zadrafi/concurve">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/dailyzad">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="meta-analysis_files/header-attrs-2.3/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Meta-Analysis Examples</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/zadrafi/concurve/blob/master/vignettes/meta-analysis.Rmd"><code>vignettes/meta-analysis.Rmd</code></a></small>
      <div class="hidden name"><code>meta-analysis.Rmd</code></div>

    </div>

    
    
<div id="simple-data-structures" class="section level1">
<h1 class="hasAnchor">
<a href="#simple-data-structures" class="anchor"></a>Simple Data Structures</h1>
<p>Here, we’ll use an example dataset taken from the <a href="http://www.metafor-project.org/doku.php/analyses:normand1999"><code>metafor</code></a> website, which also hosts the very famous <code>metafor</code> package.<span class="citation"><sup><span class="citeproc-not-found" data-reference-id="Viechtbauer2010-ss"><strong>???</strong></span></sup></span></p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://www.metafor-project.org">metafor</a></span>)
<span class="co">#&gt; Loading required package: Matrix</span>
<span class="co">#&gt; Loading 'metafor' package (version 2.4-0). For an overview </span>
<span class="co">#&gt; and introduction to the package please type: help(metafor).</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://data.lesslikely.com/concurve">concurve</a></span>)
<span class="co">#&gt; Please see the documentation on https://data.lesslikely.com/concurve/ or by typing `help(concurve)`</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span>)
<span class="kw">dat.hine1989</span>
<span class="co">#&gt;   study         source n1i n2i ai ci</span>
<span class="co">#&gt; 1     1  Chopra et al.  39  43  2  1</span>
<span class="co">#&gt; 2     2       Mogensen  44  44  4  4</span>
<span class="co">#&gt; 3     3    Pitt et al. 107 110  6  4</span>
<span class="co">#&gt; 4     4   Darby et al. 103 100  7  5</span>
<span class="co">#&gt; 5     5 Bennett et al. 110 106  7  3</span>
<span class="co">#&gt; 6     6 O'Brien et al. 154 146 11  4</span>
</pre></div>
<p>I will quote Wolfgang (the creator of the <code>metafor</code> package) here, since he explains it best,</p>
<blockquote>
<p>"As described under help(dat.hine1989), variables <strong>n1i</strong> and <strong>n2i</strong> are the number of patients in the lidocaine and control group, respectively, and <strong>ai</strong> and <strong>ci</strong> are the corresponding number of deaths in the two groups. Since these are 2×2 table data, a variety of different outcome measures could be used for the meta-analysis, including the risk difference, the risk ratio (relative risk), and the odds ratio (see Table III). Normand (1999) uses risk differences for the meta-analysis, so we will proceed accordingly. We can calculate the risk differences and corresponding sampling variances with:</p>
</blockquote>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metafor/man/escalc.html">escalc</a></span>(measure = <span class="st">"RD"</span>, n1i = <span class="kw">n1i</span>, n2i = <span class="kw">n2i</span>, ai = <span class="kw">ai</span>, ci = <span class="kw">ci</span>, data = <span class="kw">dat.hine1989</span>)
<span class="kw">dat</span>
<span class="co">#&gt;   study         source n1i n2i ai ci     yi     vi </span>
<span class="co">#&gt; 1     1  Chopra et al.  39  43  2  1 0.0280 0.0018 </span>
<span class="co">#&gt; 2     2       Mogensen  44  44  4  4 0.0000 0.0038 </span>
<span class="co">#&gt; 3     3    Pitt et al. 107 110  6  4 0.0197 0.0008 </span>
<span class="co">#&gt; 4     4   Darby et al. 103 100  7  5 0.0180 0.0011 </span>
<span class="co">#&gt; 5     5 Bennett et al. 110 106  7  3 0.0353 0.0008 </span>
<span class="co">#&gt; 6     6 O'Brien et al. 154 146 11  4 0.0440 0.0006</span>
</pre></div>
<blockquote>
<p>"Note that the <strong>yi</strong> values are the risk differences in terms of proportions. Since Normand (1999) provides the results in terms of percentages, we can make the results directly comparable by multiplying the risk differences by 100 (and the sampling variances by <span class="math inline">\(100^{2}\)</span>):</p>
</blockquote>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">dat</span><span class="op">$</span><span class="kw">yi</span> <span class="op">&lt;-</span> <span class="kw">dat</span><span class="op">$</span><span class="kw">yi</span> <span class="op">*</span> <span class="fl">100</span>
<span class="kw">dat</span><span class="op">$</span><span class="kw">vi</span> <span class="op">&lt;-</span> <span class="kw">dat</span><span class="op">$</span><span class="kw">vi</span> <span class="op">*</span> <span class="fl">100</span><span class="op">^</span><span class="fl">2</span>
</pre></div>
<p>We can fit a fixed-effects model with the following</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">fe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metafor/man/rma.uni.html">rma</a></span>(<span class="kw">yi</span>, <span class="kw">vi</span>, data = <span class="kw">dat</span>, method = <span class="st">"FE"</span>)
</pre></div>
<p>Now that we have our <code>metafor</code> object, we can compute the consonance function using the <code><a href="../reference/curve_meta.html">curve_meta()</a></code> function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">fecurve</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/curve_meta.html">curve_meta</a></span>(<span class="kw">fe</span>, cores = <span class="fl">1L</span>)
</pre></div>
<p>Now we can graph our function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="../reference/ggcurve.html">ggcurve</a></span>(<span class="kw">fecurve</span>[[<span class="fl">1</span>]], nullvalue = <span class="fl">TRUE</span>)
</pre></div>
<p><img src="meta-analysis_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<p>We used a fixed-effects model here, but if we wanted to use a random-effects model, we could do so with the following, where we can specify a restricted maximum likelihood estimator (REML) for the random-effects model</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">re</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metafor/man/rma.uni.html">rma</a></span>(<span class="kw">yi</span>, <span class="kw">vi</span>, data = <span class="kw">dat</span>, method = <span class="st">"REML"</span>)
</pre></div>
<p>And then we could use <code><a href="../reference/curve_meta.html">curve_meta()</a></code> to get the relevant list</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="kw">recurve</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/curve_meta.html">curve_meta</a></span>(<span class="kw">re</span>, cores = <span class="fl">1L</span>)
</pre></div>
<p>Now we can plot our object.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="../reference/ggcurve.html">ggcurve</a></span>(<span class="kw">recurve</span>[[<span class="fl">1</span>]], nullvalue = <span class="fl">TRUE</span>)
</pre></div>
<p><img src="meta-analysis_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<p>We could also compare our two models to see how much consonance/overlap there is</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="../reference/curve_compare.html">curve_compare</a></span>(<span class="kw">fecurve</span>[[<span class="fl">1</span>]], <span class="kw">recurve</span>[[<span class="fl">1</span>]], plot = <span class="fl">TRUE</span>)
<span class="co">#&gt; [1] "AUC = Area Under the Curve"</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; | AUC 1| AUC 2| Shared AUC| AUC Overlap (%)| Overlap:Non-Overlap AUC Ratio|</span>
<span class="co">#&gt; |-----:|-----:|----------:|---------------:|-----------------------------:|</span>
<span class="co">#&gt; | 2.084| 2.084|      2.084|             100|                           Inf|</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
</pre></div>
<p><img src="meta-analysis_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
<p>The results are practically the same and we cannot actually see any difference, and the AUC % overlap also is consisten with this.</p>
</div>
<div id="complex-data-structures" class="section level1">
<h1 class="hasAnchor">
<a href="#complex-data-structures" class="anchor"></a>Complex Data Structures</h1>
<p><code>concurve</code> can also handle complex data structures from <code>metafor</code> that are clustered.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">

<span class="co">### copy data from Berkey et al. (1998) into 'dat'</span>
<span class="kw">dat</span> <span class="op">&lt;-</span> <span class="kw">dat.berkey1998</span>

<span class="co">### construct list of the variance-covariance matrices of the observed outcomes for the studies</span>
<span class="kw">V</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span>(<span class="kw">dat</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"v1i"</span>, <span class="st">"v2i"</span>)], <span class="kw">dat</span><span class="op">$</span><span class="kw">trial</span>), <span class="kw">as.matrix</span>)

<span class="co">### construct block diagonal matrix</span>
<span class="kw">V</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metafor/man/bldiag.html">bldiag</a></span>(<span class="kw">V</span>)

<span class="co">### fit multivariate model</span>
<span class="kw">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metafor/man/rma.mv.html">rma.mv</a></span>(<span class="kw">yi</span>, <span class="kw">V</span>, mods = <span class="op">~</span> <span class="kw">outcome</span> <span class="op">-</span> <span class="fl">1</span>, random = <span class="op">~</span> <span class="kw">outcome</span> <span class="op">|</span> <span class="kw">trial</span>, struct = <span class="st">"UN"</span>, data = <span class="kw">dat</span>)

<span class="co">### results based on sandwich method</span>
(<span class="kw">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metafor/man/robust.html">robust</a></span>(<span class="kw">res</span>, cluster = <span class="kw">dat</span><span class="op">$</span><span class="kw">trial</span>))
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of outcomes:   10</span>
<span class="co">#&gt; Number of clusters:   5</span>
<span class="co">#&gt; Outcomes per cluster: 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Test of Moderators (coefficients 1:2):</span>
<span class="co">#&gt; F(df1 = 2, df2 = 3) = 41.6138, p-val = 0.0065</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model Results:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;            estimate      se     tval    pval    ci.lb    ci.ub </span>
<span class="co">#&gt; outcomeAL   -0.3392  0.1010  -3.3597  0.0437  -0.6605  -0.0179  * </span>
<span class="co">#&gt; outcomePD    0.3534  0.0675   5.2338  0.0136   0.1385   0.5683  * </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>

<span class="kw">l</span> <span class="op">&lt;-</span> <span class="kw">concurve</span>::<span class="fu"><a href="../reference/curve_meta.html">curve_meta</a></span>(<span class="kw">res</span>, method = <span class="st">"uni"</span>, robust = <span class="fl">TRUE</span>, cluster = <span class="kw">dat</span><span class="op">$</span><span class="kw">trial</span>, adjust = <span class="fl">TRUE</span>, steps = <span class="fl">1000</span>, cores = <span class="fl">1L</span>)

<span class="fu"><a href="../reference/ggcurve.html">ggcurve</a></span>(data = <span class="kw">l</span>[[<span class="fl">1</span>]], type = <span class="st">"c"</span>) <span class="op">+</span>
  <span class="kw">ggplot2</span>::<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>()
</pre></div>
<p><img src="meta-analysis_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<p>The interval function is quite narrow because there were so many iterations that were set by us.</p>
<p>Here, we simulate a more complicated set of trials using the <code>simstudy</code> package.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw">simstudy</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw">parallel</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://svn.r-project.org/R-packages/trunk/nlme">nlme</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://r-datatable.com">data.table</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://www.metafor-project.org">metafor</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://data.lesslikely.com/concurve">concurve</a></span>)

<span class="kw">defS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/defData.html">defData</a></span>(varname = <span class="st">"a.k"</span>, formula = <span class="fl">3</span>, variance = <span class="fl">2</span>, id = <span class="st">"study"</span>)
<span class="kw">defS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/defData.html">defData</a></span>(<span class="kw">defS</span>, varname = <span class="st">"d.0"</span>, formula = <span class="fl">3</span>, dist = <span class="st">"nonrandom"</span>)
<span class="kw">defS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/defData.html">defData</a></span>(<span class="kw">defS</span>, varname = <span class="st">"v.k"</span>, formula = <span class="fl">0</span>, variance = <span class="fl">6</span>, dist= <span class="st">"normal"</span>)
<span class="kw">defS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/defData.html">defData</a></span>(<span class="kw">defS</span>, varname = <span class="st">"s2.k"</span>, formula = <span class="fl">16</span>, variance = <span class="fl">.2</span>, dist = <span class="st">"gamma"</span>)
<span class="kw">defS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/defData.html">defData</a></span>(<span class="kw">defS</span>, varname = <span class="st">"size.study"</span>, formula = <span class="st">".3;.5;.2"</span>, dist = <span class="st">"categorical"</span>)
<span class="kw">defS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/defData.html">defData</a></span>(<span class="kw">defS</span>, varname = <span class="st">"n.study"</span>,
                formula = <span class="st">"(size.study==1) * 20 + (size.study==2) * 40 + (size.study==3) * 60"</span>,
                dist = <span class="st">"poisson"</span>)

<span class="kw">defI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/defDataAdd.html">defDataAdd</a></span>(varname = <span class="st">"y"</span>, formula = <span class="st">"a.k + x * (d.0 + v.k)"</span>, variance = <span class="st">"s2.k"</span>)

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">RNGkind</a></span>(kind = <span class="st">"L'Ecuyer-CMRG"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">1031</span>)

<span class="kw">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/genData.html">genData</a></span>(<span class="fl">12</span>, <span class="kw">defS</span>)
<span class="kw">ds</span>
<span class="co">#&gt;     study      a.k d.0        v.k      s2.k size.study n.study</span>
<span class="co">#&gt;  1:     1 4.745069   3 -5.1399796 16.275358          2      38</span>
<span class="co">#&gt;  2:     2 1.983020   3 -3.2693291 13.976232          3      66</span>
<span class="co">#&gt;  3:     3 1.865846   3  1.9742469  8.332148          2      40</span>
<span class="co">#&gt;  4:     4 4.235730   3 -3.2126873 11.100117          2      40</span>
<span class="co">#&gt;  5:     5 4.246219   3 -0.5858786 13.765175          3      57</span>
<span class="co">#&gt;  6:     6 3.899617   3  4.6808278  7.532707          2      41</span>
<span class="co">#&gt;  7:     7 3.059236   3 -5.9924638  7.817771          1      14</span>
<span class="co">#&gt;  8:     8 2.324586   3  5.7588246 10.970013          3      56</span>
<span class="co">#&gt;  9:     9 3.857260   3 -1.1081854 24.039016          3      75</span>
<span class="co">#&gt; 10:    10 4.308413   3 -1.9081253 14.084537          1      24</span>
<span class="co">#&gt; 11:    11 1.607899   3  0.2178001  8.271145          2      48</span>
<span class="co">#&gt; 12:    12 3.717728   3  1.8818612 11.274497          3      67</span>

<span class="kw">dc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/genCluster.html">genCluster</a></span>(<span class="kw">ds</span>, <span class="st">"study"</span>, <span class="st">"n.study"</span>, <span class="st">"id"</span>, )
<span class="kw">dc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/trtAssign.html">trtAssign</a></span>(<span class="kw">dc</span>, strata = <span class="st">"study"</span>, grpName = <span class="st">"x"</span>)
<span class="kw">dc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simstudy/man/addColumns.html">addColumns</a></span>(<span class="kw">defI</span>, <span class="kw">dc</span>)


<span class="kw">d.obs</span> <span class="op">&lt;-</span> <span class="kw">dc</span>[, <span class="fu">.</span>(<span class="kw">study</span>, <span class="kw">id</span>,<span class="kw">s2.k</span>, <span class="kw">x</span>, <span class="kw">y</span>)]
<span class="kw">d.obs</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="kw">d.obs</span>)
<span class="kw">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metafor/man/rma.mv.html">rma.mv</a></span>(yi = <span class="kw">y</span>, V = <span class="kw">s2.k</span>, W = <span class="kw">NULL</span>, mods = <span class="op">~</span>  <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw">study</span>) <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw">x</span>),  random = <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw">x</span>) <span class="op">|</span> <span class="kw">study</span>, struct=<span class="st">"CS"</span>, data = <span class="kw">d.obs</span>, method = <span class="st">"REML"</span>)

<span class="kw">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/curve_meta.html">curve_meta</a></span>(x = <span class="kw">res</span>, measure = <span class="st">"default"</span>, method = <span class="st">"mv"</span>, parm = <span class="st">"factor(x)1"</span>, cores = <span class="fl">1L</span>)
<span class="fu"><a href="../reference/ggcurve.html">ggcurve</a></span>(<span class="kw">a</span>[[<span class="fl">2</span>]], type = <span class="st">"cdf"</span>)
</pre></div>
<p><img src="meta-analysis_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div id="cite-r-packages" class="section level1">
<h1 class="hasAnchor">
<a href="#cite-r-packages" class="anchor"></a>Cite R packages</h1>
<p>Please remember to cite the packages that you use.</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"concurve"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Rafi Z, Vigotsky A (2020). _concurve: Computes and Plots Compatibility</span>
<span class="co">#&gt; (Confidence) Intervals, P-Values, S-Values, &amp; Likelihood Intervals to</span>
<span class="co">#&gt; Form Consonance, Surprisal, &amp; Likelihood Functions_. R package version</span>
<span class="co">#&gt; 2.7.5, &lt;URL: https://CRAN.R-project.org/package=concurve&gt;.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Rafi Z, Greenland S (2020). _Semantic and Cognitive Tools to Aid</span>
<span class="co">#&gt; Statistical Science: Replace Confidence and Significance by</span>
<span class="co">#&gt; Compatibility and Surprise_, series Technical Advance. &lt;URL:</span>
<span class="co">#&gt; https://doi.org/10.1186/s12874-020-01105-9&gt;.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; To see these entries in BibTeX format, use 'print(&lt;citation&gt;,</span>
<span class="co">#&gt; bibtex=TRUE)', 'toBibtex(.)', or set</span>
<span class="co">#&gt; 'options(citation.bibtex.max=999)'.</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"ggplot2"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite ggplot2 in publications, please use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   H. Wickham. ggplot2: Elegant Graphics for Data Analysis.</span>
<span class="co">#&gt;   Springer-Verlag New York, 2016.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Book{,</span>
<span class="co">#&gt;     author = {Hadley Wickham},</span>
<span class="co">#&gt;     title = {ggplot2: Elegant Graphics for Data Analysis},</span>
<span class="co">#&gt;     publisher = {Springer-Verlag New York},</span>
<span class="co">#&gt;     year = {2016},</span>
<span class="co">#&gt;     isbn = {978-3-319-24277-4},</span>
<span class="co">#&gt;     url = {https://ggplot2.tidyverse.org},</span>
<span class="co">#&gt;   }</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"metafor"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite the metafor package in publications, please use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Viechtbauer, W. (2010). Conducting meta-analyses in R with the</span>
<span class="co">#&gt;   metafor package. Journal of Statistical Software, 36(3), 1-48. URL:</span>
<span class="co">#&gt;   https://www.jstatsoft.org/v36/i03/</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Article{,</span>
<span class="co">#&gt;     title = {Conducting meta-analyses in {R} with the {metafor} package},</span>
<span class="co">#&gt;     author = {Wolfgang Viechtbauer},</span>
<span class="co">#&gt;     journal = {Journal of Statistical Software},</span>
<span class="co">#&gt;     year = {2010},</span>
<span class="co">#&gt;     volume = {36},</span>
<span class="co">#&gt;     number = {3},</span>
<span class="co">#&gt;     pages = {1--48},</span>
<span class="co">#&gt;     url = {https://www.jstatsoft.org/v36/i03/},</span>
<span class="co">#&gt;   }</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"simstudy"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite package 'simstudy' in publications use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Keith Goldfeld (2020). simstudy: Simulation of Study Data. R package</span>
<span class="co">#&gt;   version 0.1.16. https://CRAN.R-project.org/package=simstudy</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {simstudy: Simulation of Study Data},</span>
<span class="co">#&gt;     author = {Keith Goldfeld},</span>
<span class="co">#&gt;     year = {2020},</span>
<span class="co">#&gt;     note = {R package version 0.1.16},</span>
<span class="co">#&gt;     url = {https://CRAN.R-project.org/package=simstudy},</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ATTENTION: This citation information has been auto-generated from the</span>
<span class="co">#&gt; package DESCRIPTION file and may need manual editing, see</span>
<span class="co">#&gt; 'help("citation")'.</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"nlme"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Pinheiro J, Bates D, DebRoy S, Sarkar D, R Core Team (2020). _nlme:</span>
<span class="co">#&gt; Linear and Nonlinear Mixed Effects Models_. R package version 3.1-149,</span>
<span class="co">#&gt; &lt;URL: https://CRAN.R-project.org/package=nlme&gt;.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {{nlme}: Linear and Nonlinear Mixed Effects Models},</span>
<span class="co">#&gt;     author = {Jose Pinheiro and Douglas Bates and Saikat DebRoy and Deepayan Sarkar and {R Core Team}},</span>
<span class="co">#&gt;     year = {2020},</span>
<span class="co">#&gt;     note = {R package version 3.1-149},</span>
<span class="co">#&gt;     url = {https://CRAN.R-project.org/package=nlme},</span>
<span class="co">#&gt;   }</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"data.table"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite package 'data.table' in publications use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Matt Dowle and Arun Srinivasan (2020). data.table: Extension of</span>
<span class="co">#&gt;   `data.frame`. R package version 1.13.0.</span>
<span class="co">#&gt;   https://CRAN.R-project.org/package=data.table</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {data.table: Extension of `data.frame`},</span>
<span class="co">#&gt;     author = {Matt Dowle and Arun Srinivasan},</span>
<span class="co">#&gt;     year = {2020},</span>
<span class="co">#&gt;     note = {R package version 1.13.0},</span>
<span class="co">#&gt;     url = {https://CRAN.R-project.org/package=data.table},</span>
<span class="co">#&gt;   }</span>
<span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"parallel"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; The 'parallel' package is part of R.  To cite R in publications use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   R Core Team (2020). R: A language and environment for statistical</span>
<span class="co">#&gt;   computing. R Foundation for Statistical Computing, Vienna, Austria.</span>
<span class="co">#&gt;   URL https://www.R-project.org/.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {R: A Language and Environment for Statistical Computing},</span>
<span class="co">#&gt;     author = {{R Core Team}},</span>
<span class="co">#&gt;     organization = {R Foundation for Statistical Computing},</span>
<span class="co">#&gt;     address = {Vienna, Austria},</span>
<span class="co">#&gt;     year = {2020},</span>
<span class="co">#&gt;     url = {https://www.R-project.org/},</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; We have invested a lot of time and effort in creating R, please cite it</span>
<span class="co">#&gt; when using it for data analysis. See also 'citation("pkgname")' for</span>
<span class="co">#&gt; citing R packages.</span>
</pre></div>
<hr>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<hr>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://twitter.com/dailyzad">Zad Rafi</a>, <a href="https://www.researchgate.net/profile/Andrew_Vigotsky">Andrew D. Vigotsky</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.0.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '328a30be91979e947c28ffd52f604eda',
    indexName: 'lesslikely-concurve',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
